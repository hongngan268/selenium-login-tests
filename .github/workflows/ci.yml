name: CI

on:
  push:
    branches:
      - main  # Chạy CI khi có thay đổi trên nhánh main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.10'  # Phiên bản Python bạn đang sử dụng

      - name: Update system packages
        run: sudo apt update

      - name: Add Microsoft Edge repository
        run: |
          sudo apt install -y wget
          wget https://packages.microsoft.com/keys/microsoft.asc -O microsoft.asc
          sudo gpg --dearmor -o /usr/share/keyrings/microsoft.gpg microsoft.asc
          echo "deb [signed-by=/usr/share/keyrings/microsoft.gpg] https://packages.microsoft.com/repos/edge/ubuntu/ $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/microsoft-edge-dev.list
          sudo apt update

      - name: Install Microsoft Edge
        run: sudo apt install -y microsoft-edge-dev

      - name: Install dependencies
        run: |
          pip install -r requirements.txt

      - name: Run tests
        run: python tests/test_login.py
